<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>

<body>
<div id="wrap">
	<div id="top_content">
		<div id="header">
			<div id="rightheader">
				<p>
					2022/4/16
					<br />
				</p>
			</div>
			<div id="topheader">
				<h1 id="title">
					<a href="#">大学生学习服务自主平台</a>
				</h1>
			</div>
			<div id="navigation">
			</div>
		</div>

<!--	<tr>-->
<!--		<td class="hr1">新用户注册</td>-->
<!--	</tr>-->
	<div id="content">
		<p id="whereami">
		</p>
		<h1>
			注册
		</h1>
		<form action="/study_system/user/insert" id="registerForm">
			<table cellpadding="0" cellspacing="0" border="0"
				   class="form_table">
<!--				<tr>-->
<!--					<td valign="middle" align="right">电话号：</td>-->
<!--					<td valign="middle" align="left"><input type="text" id="user" class="inputgri" onblur="checkUser()"></td>-->
<!--					<td>-->
<!--						<div id="userPrompt">用户名由英文字母和数字组成的4-16位字符，以字母开头</div>-->
<!--					</td>-->
<!--				</tr>-->

				<tr>
					<td valign="middle" align="right">手机号码：</td>
					<td valign="middle" align="left"><input type="text" id="telNumber" name="telNumber" class="inputgri" onblur="checkMobile()"></td>
					<td>
						<div id="mobilePrompt"></div>
					</td>
				</tr>

				<tr>
					<td valign="middle" align="right">密码：</td>
					<td valign="middle" align="left"><input type="password" id="passWord" name="passWord" class="inputgri" onblur="checkpwd()"></td>
					<td>
						<div id="pwdPrompt">
							密码由英文字母和数字组成的4-10位字符
						</div>
					</td>
				</tr>
				<tr>
					<td valign="middle" align="right">
						确认密码：
					</td>
					<td valign="middle" align="left"><input type="password" id="repwd" class="inputgri" onblur="checkRepwd()"></td>
					<td>
						<div id="repwdPrompt"></div>
					</td>
				</tr>
				<tr>
					<td valign="middle" align="right">
						电子邮箱：
					</td>
					<td valign="middle" align="left"> <input type="text" id="mail" name="mail" class="inputgri" onblur="checkEmail()"></td>
					<td>
						<div id="emailPrompt"></div>
					</td>
				</tr>

				<tr>
					<td></td>
					<td class="center"><button type="button" id="register">提交</button></td>
					<td></td>
				</tr>
			</table>
		</td>
	</form>
	</div>
	</div>
	<div id="footer">
		<div id="footer_bg">

		</div>
	</div>
</div>
</body>
<script type="text/javascript" src="js/jquery-3.5.1.js"></script>
<script type="text/javascript">

	$("#register").click(function () {

		if(checkEmail()&&checkMobile()&&checkpwd()&&checkRepwd()){
			$("#registerForm").submit();
		}else{
			window.alert("注册失败，请重试！");
		}

	})

	function isEmpty(str) {
		if(str==null||str.trim()==""){
			return true;
		}
		return false;
	}


	// function $(elementId) {
	// 	return document.getElementById(elementId).value;
	// }

	function divId(elementId) {
		return document.getElementById(elementId);
	}

	function checkUser() {
		var user = $('#user').val();
		var userId = divId('userPrompt')
		userId.innerHTML = '';
		var reg = /^[a-z][a-zA-Z0-9]{3,15}$/;
		if (reg.test(user) == false) {
			userId.innerHTML = '用户名不正确';
			return false;
		}
		userId.innerHTML = '用户名可用';
		return true;
	}

	function checkpwd() {
		var pwd = $('#passWord').val();
		var pwdId = divId('pwdPrompt');
		pwdId.innerHTMl = ' ';
		var reg = /^[a-zA-z0-9]{4,10}$/;
		if (reg.test(pwd) == false) {
			pwdId.innerHTML = '密码不能含有非法字符，长度在4-10之间'
			return false;
		}
		return true;
	}

	function checkRepwd() {
		var repwd = $('#repwd').val();
		var pwd = $('#passWord').val();
		var Rpwd = divId('repwdPrompt');
		Rpwd.innerHTMl = '';
		if (pwd != repwd) {
			Rpwd.innerHTML = '两次输入的密码不一致';
			//console.log('密码不一致')
			return false;
		}
		Rpwd.innerHTML = '';
		// console.log('密码一致')
		return true;
	}

	function checkEmail() {
		var email = $('#mail').val();
		var emailPrompt = divId('emailPrompt');
		emailPrompt.innerHTML = ' ';
		var reg = /^\w+@\w+(\.[a-zA-Z]{2,3}){1,2}$/;
		if (reg.test(email) == false) {
			emailPrompt.innerHTML = 'Email格式不正确，例如web@sohu.com';
			return false;
		}
		return true
	}

	function checkMobile() {
		var mobile = $('#telNumber').val();
		var mobileId = divId('mobilePrompt');
		var regMobile = /^1\d{10}$/;
		if (regMobile.test(mobile) == false) {
			mobileId.innerHTML = '手机号码不正确，请重新输入';
			return false;
		}
		mobileId.innerHTML = ' ';
		return true;
	};
</script>
